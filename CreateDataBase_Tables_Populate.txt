CREATE DATABASE mySales;

USE mySales;

CREATE TABLE tb_funcionarios (
    fun_codigo BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    fun_nome VARCHAR(45) NOT NULL,
    fun_cpf VARCHAR(45) NOT NULL,
    fun_senha VARCHAR(50) NOT NULL,
    fun_funcao VARCHAR(50) NOT NULL
);

CREATE TABLE tb_vendas (
    ven_codigo BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    ven_horario TIMESTAMP,
    ven_valor_total DECIMAL(7,2),
    tb_funcionarios_fun_codigo BIGINT,
    FOREIGN KEY (tb_funcionarios_fun_codigo) REFERENCES tb_funcionarios(fun_codigo)
); 

CREATE TABLE tb_fornecedores (
    for_codigo BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    for_descricao VARCHAR(45) NOT NULL
);

CREATE TABLE tb_produtos (
    pro_codigo BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    pro_descricao VARCHAR(45) NOT NULL,
    pro_valor DECIMAL(7,2),
    pro_quantidade INT,
    tb_fornecedores_fun_codigo BIGINT,
    FOREIGN KEY (tb_fornecedores_fun_codigo) REFERENCES tb_fornecedores(for_codigo)
);

CREATE TABLE tb_vendas_itens (
    vite_codigo BIGINT PRIMARY KEY GENERATED ALWAYS AS IDENTITY,
    vite_quantidade INT,
    vite_valor_parcial DECIMAL(7,2),
    tb_produtos_pro_codigo BIGINT,
    tb_vendas_ven_codigo BIGINT,
    FOREIGN KEY (tb_produtos_pro_codigo) REFERENCES tb_produtos(pro_codigo),
    FOREIGN KEY (tb_vendas_ven_codigo) REFERENCES tb_vendas(ven_codigo)
);





INSERT INTO tb_fornecedores (for_descricao) VALUES ('Fornecedor ABC');
INSERT INTO tb_fornecedores (for_descricao) VALUES ('Distribuidora XYZ');
INSERT INTO tb_fornecedores (for_descricao) VALUES ('Suprimentos LMN');

INSERT INTO tb_produtos (pro_descricao, pro_valor, pro_quantidade, tb_fornecedores_fun_codigo) VALUES
('Caneta Esferográfica', 1.50, 500, 1),
('Lápis HB', 0.75, 1000, 1),
('Caderno 200 Folhas', 15.00, 300, 1),
('Mouse Óptico', 25.00, 150, 2),
('Teclado Mecânico', 150.00, 50, 2),
('Monitor LED 24"', 800.00, 30, 2),
('Papel A4 500 Folhas', 20.00, 400, 3),
('Toner para Impressora', 250.00, 70, 3),
('Cadeira Ergonômica', 600.00, 20, 3),
('Mesa para Escritório', 1200.00, 10, 3);
